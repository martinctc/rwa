% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rwa_multiregress.R
\name{rwa_multiregress}
\alias{rwa_multiregress}
\title{Create a Relative Weights Analysis (RWA)}
\usage{
rwa_multiregress(
  df,
  outcome,
  predictors,
  applysigns = FALSE,
  use = "pairwise.complete.obs",
  weight = NULL
)
}
\arguments{
\item{df}{Data frame or tibble to be passed through.}

\item{outcome}{Outcome variable, to be specified as a string or bare input. Must be a numeric variable.}

\item{predictors}{Predictor variable(s), to be specified as a vector of string(s) or bare input(s). All variables must be numeric.}

\item{applysigns}{Logical value specifying whether to show an estimate that applies the sign. Defaults to \code{FALSE}.}

\item{use}{Method for handling missing data when computing correlations. Options are:
"everything" (missing values in correlations propagate),
"all.obs" (error if missing values present),
"complete.obs" (listwise deletion),
"na.or.complete" (error if some but not all missing),
"pairwise.complete.obs" (pairwise deletion, default).
See \code{\link[stats]{cor}} for more details.}

\item{weight}{Optional name of a weight variable in the data frame. If provided,
a weighted correlation matrix will be computed using the specified weights.
The weight variable must be numeric and positive. Defaults to \code{NULL}
(unweighted analysis).}
}
\value{
\code{rwa_multiregress()} returns a list of outputs, as follows:
\itemize{
\item \code{predictors}: character vector of names of the predictor variables used.
\item \code{rsquare}: the rsquare value of the regression model.
\item \code{result}: the final output of the importance metrics.
\itemize{
\item The \code{Rescaled.RelWeight} column sums up to 100.
\item The \code{Sign} column indicates whether a predictor is positively or negatively correlated with the outcome.
}
\item \code{n}: indicates the number of observations used in the analysis.
\item \code{lambda}: the transformation matrix that maps the original correlated predictors to orthogonal variables while preserving their relationship to the outcome. Used internally to compute relative weights.
\item \code{RXX}: Correlation matrix of all the predictor variables against each other.
\item \code{RXY}: Correlation values of the predictor variables against the outcome variable.
}
}
\description{
This function creates a Relative Weights Analysis (RWA) and returns a list of outputs.
RWA provides a heuristic method for estimating the relative weight of predictor variables in multiple regression, which involves
creating a multiple regression with on a set of transformed predictors which are orthogonal to each other but
maximally related to the original set of predictors.
\code{rwa_multiregress()} is optimised for dplyr pipes and shows positive / negative signs for weights.
}
\details{
\code{rwa_multiregress()} produces raw relative weight values (epsilons) as well as rescaled weights (scaled as a percentage of predictable variance)
for every predictor in the model.
Signs are added to the weights when the \code{applysigns} argument is set to \code{TRUE}.
See \url{https://www.scotttonidandel.com/rwa-web} for the original implementation that inspired this package.
}
\examples{
# Basic multiple regression RWA
result <- rwa_multiregress(
  df = mtcars,
  outcome = "mpg",
  predictors = c("cyl", "disp", "hp", "wt")
)

# View the relative importance results
result$result

# With sign information
result_signed <- rwa_multiregress(
  df = mtcars,
  outcome = "mpg",
  predictors = c("cyl", "disp", "hp", "wt"),
  applysigns = TRUE
)
result_signed$result

# Using listwise deletion for missing data
rwa_multiregress(
  df = mtcars,
  outcome = "mpg",
  predictors = c("cyl", "disp"),
  use = "complete.obs"
)

# With observation weights
mtcars_weighted <- mtcars
mtcars_weighted$w <- runif(nrow(mtcars), 0.5, 2)
rwa_multiregress(
  df = mtcars_weighted,
  outcome = "mpg",
  predictors = c("cyl", "disp"),
  weight = "w"
)

}
